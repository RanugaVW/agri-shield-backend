version: "3"

services:
  # Main API Service
  api:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        APP_SCOPE: "@repo/api"
        APP_PATH: "apps/api"
    image: agrishield-backend-api
    container_name: agrishield-api
    ports:
      - "5001:5001"
    environment:
      - PORT=5001
    env_file:
      - apps/core/.env

  # EXAMPLE: How to add a future microservice (e.g., notification-service)
  # notification:
  #   build:
  #     context: .
  #     dockerfile: Dockerfile
  #     args:
  #       APP_SCOPE: "@repo/notification"
  #       APP_PATH: "apps/notification"
  #   ports:
  #     - "5002:5002"
